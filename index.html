<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>نموذج إرسال بسيط</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      direction: rtl;
      padding: 20px;
      background: #f9f9f9;
    }
    label, select, input, button {
      display: block;
      width: 100%;
      margin-bottom: 10px;
      font-size: 1rem;
      padding: 8px;
      box-sizing: border-box;
    }
    button#submitBtn {
      background: #007bff;
      color: #fff;
      border: none;
      cursor: pointer;
    }
    button#submitBtn:hover {
      background: #0056b3;
    }
    #accumulatedItems {
      white-space: pre-wrap;
      background: #fff;
      border: 1px solid #ccc;
      padding: 10px;
      min-height: 80px;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>

<h2>نموذج تسجيل سحب أصناف</h2>

<label for="driverId">رقم السائق أو اسمه:</label>
<input type="text" id="driverId" placeholder="أدخل رقم السائق أو اسمه" />

<label for="itemSelect">اختر الصنف:</label>
<select id="itemSelect">
  <option value="">-- اختر صنف --</option>
  <option value="Power Cable Black">Power Cable Black</option>
  <option value="IdeaHub- 65">IdeaHub- 65</option>
  <option value="IdeaHub -75">IdeaHub -75</option>
  <option value="IdeaHub- 86">IdeaHub- 86</option>
  <option value="IdeaHub Controller">IdeaHub Controller</option>
  <option value="Mic 500">Mic 500</option>
  <option value="Mic 100">Mic 100</option>
  <option value="Mic 100 Pro">Mic 100 Pro</option>
  <option value="Ideashare Key">Ideashare Key</option>
</select>

<label for="serialInput">أدخل رقم السيريال واضغط Enter:</label>
<input type="text" id="serialInput" placeholder="أدخل رقم السيريال هنا" />

<h3>الأصناف المضافة:</h3>
<div id="accumulatedItems">(لا توجد بيانات بعد)</div>

<button id="submitBtn">إرسال</button>

<script>
  const driverInput = document.getElementById('driverId');
  const itemSelect = document.getElementById('itemSelect');
  const serialInput = document.getElementById('serialInput');
  const accumulatedItemsDiv = document.getElementById('accumulatedItems');
  const submitBtn = document.getElementById('submitBtn');

  const entries = {};

  function updateDisplay() {
    if (Object.keys(entries).length === 0) {
      accumulatedItemsDiv.textContent = "(لا توجد بيانات بعد)";
      return;
    }
    let text = "";
    for (const [item, serials] of Object.entries(entries)) {
      text += `- ${item} — Serial: ${serials.join(", ")}\n`;
    }
    accumulatedItemsDiv.textContent = text.trim();
  }

  serialInput.addEventListener('keydown', (e) => {
    if (e.key === 'Enter') {
      e.preventDefault();
      const item = itemSelect.value.trim();
      const serial = serialInput.value.trim();
      if (!item) {
        alert("يرجى اختيار صنف أولاً");
        return;
      }
      if (!serial) {
        alert("يرجى إدخال رقم السيريال");
        return;
      }
      if (!entries[item]) {
        entries[item] = [];
      }
      if (!entries[item].includes(serial)) {
        entries[item].push(serial);
        updateDisplay();
      }
      serialInput.value = '';
    }
  });

  submitBtn.addEventListener('click', () => {
    const driver = driverInput.value.trim();
    if (!driver) {
      alert("يرجى إدخال رقم أو اسم السائق");
      return;
    }
    if (Object.keys(entries).length === 0) {
      alert("يرجى إدخال صنف واحد على الأقل مع رقم/أرقام السيريال");
      return;
    }

    // هنا ترسل البيانات فعليًا - الآن سنطبعها في الكونسول فقط
    console.log("إرسال البيانات:");
    console.log("السائق:", driver);
    console.log("الأصناف والسيريالات:", entries);

    alert("تم الإرسال! تحقق من الكونسول (Console)");

    // إعادة تعيين الحقول
    driverInput.value = '';
    itemSelect.value = '';
    serialInput.value = '';
    for (const key in entries) {
      delete entries[key];
    }
    updateDisplay();
  });
</script>

</body>
</html>
